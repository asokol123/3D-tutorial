# Устройство проекта
Проект написан на `C++ 17` с использованием пакетного менеджера `conan` и системы сборки `CMake`

Для автоматической документации к коду используется `Doxygen`

# Как самому написать такой проект и не умереть

## Выбор пакетного менеджера
Любой крупный проект использует сторонние библиотеки. Удобнее всего их использовать через пакетный менеджер.

В отличие от многих языков `C++` нет стандартного пакетного менеджера, и я выбрал `conan`. Более подробно про `conan` и его сравнение с другими пакетными менеджерами [тут](./package.md). Простое введение в conan есть на [habr](https://habr.com/ru/post/342982/).

## Выбор системы сборки
Система сборки - одна из главных болей в `C++`, поскольку единого стандарта нет. Самой популярной открытой системой сборки явлется `CMake`.

Он используется по умолчанию в `CLion`, но у него есть огромное количество недостатков. Например поэтому большинство крупных компаний (Google, Yandex, etc.) используют собственные системы контроля версий.

Хорошего введения в `CMake` в интернете нет, есть [несколько](https://habr.com/ru/post/431428/) [статей](https://habr.com/ru/post/155467/) на хабре, но даже после их прочтения возникает много вопросов "как и что сделать"

Чуть подробнее про `CMake` и еще несколько систем сборки можно найти [тут](./buildsys.md)

## Настройка IDE
Писать код без IDE намного сложнее, чем в IDE, а на курсах в университетах крайне редко рассказывают, какие `IDE` есть, как их настроить и в чем разница.

Я расскажу только про несколько вариантов, с которыми лично работал.
* `vim`
* `CLion`
* `VScode`
* `Visual Studio`

Полный обзор `IDE` тема огромная, поэтому я лишь дам краткий обзор как настроить [тут](./IDE.md).

## Документация
Есть популярное мнение что код должен документировать сам себя. Но при написании библиотеки, которой (возможно) будет пользоваться много людей вы сэкономите им много времени, предоставив хорошую документацию и еще больше если предоставить `design document`-ы и диаграммы взаимодействия системы.

Вряд ли нашей библиотекой будет пользоваться много людей, но лучше написать документацию. Для этого будет использоваться `Doxygen`.

`Doxygen` удобен тем, что документация живет прям в коде. Вы пишете просто комментарии, а оно строит красивую документацию:
```C++
/*!
  \brief Класс человека

  Этот класс хранит человека: имя, фамилию, работу, социальные связи
*/
class THuman {

};
```

## Codestyle
Единого стиля кода для `C++` так же нет, поэтому я выбрал `Yandex c++ style guide`. Достаточно полное его описание можно найти в [открытом доступе](https://github.com/yandex/CMICOT/blob/master/CPP_STYLE_GUIDE.md).

Для контроля стиля кода существуют утилиты `clang-format` и `clang-tidy`.

## Архитектура
__До__ написания кода необходимо продумать архитектуру проекта.

Часто для этого используются так же `UML`-диаграммы, [тут](./arch.md) мы приведем текстовое описание.

## Отладка и логирование
Отладка - неотъемлимая часть написания любого проекта, и некоторые основные практики привести нужно. Более подробно их можно найти [здесь](./debug.md).

* `Wall`, `Werror`
* `Debug` сборка
* `sanitizer`
* `assert`
* Разные уровни логирования, а не просто `cerr`
* `gdb`, `lldb`, отладчик из IDE

## В процессе написания
В процесе написания надо помнить несколько вещей

* Заранее настроить IDE и систему сборки. Без `Warning`-ов писать код на `C++` невозможно, он не заработает, ошибки будет намного сложнее искать.
* Проверить архитекруту, лучше всего посоветоваться с двумя-тремя знакомыми.
* Писать комментарии и документацию прямо по ходу написания кода. Есть большой соблазн оставить на потом, но потом будет тяжелее.

Само описание алгоритма находится [тут](./algo.md).

## Особенности C++
В процессе написания придется столкнуться с многими особенностями `C++`.

Обзор важных и не очень особенностей, с которыми я столкнулся во время написания проекта, можно найти [тут](./cpp.md).